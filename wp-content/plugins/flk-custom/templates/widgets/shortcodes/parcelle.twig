<div class="header_parcelle_block header_shortcode_block button_hide bloc_edition_parcelle">
    <p> FORMULAIRE POUR UNE PARCELLE </p>
    <div>
        <a class="edit" title="Modifier la parcelle"><img src="/wp-content/uploads/2022/08/outil-crayon.svg"></a>
        <a class="supprimer" title="Supprimer la parcelle"><img src="/wp-content/uploads/2022/08/sup-button.svg"></a>
    </div>
</div>

<div class="body_parcelle_block body_shortcode_block block_open block_parcelle_creation">
    <h2>Formulaire pour une parcelle</h2>
    <h3> Ajouter une parcelle à reprendre : </h3>
    <p>Par ce formulaire, vous pouvez mettre en avant vos vignes à la vente ou à la location. Pour toute difficulté dans le remplissage du formulaire, vous pouvez nous contacter par mail ou téléphone pour une assistance dans la rédaction de l’offre.</p>
    <p>Pour obtenir la surface et les coordonnées GPS, cliquer sur "<strong>Vérifier le cadastre</strong>"</p>
         {% for key, sous_group in inputs %}
        <div class="{{key}} sous_group sous_group_{{key}}" data-key="{{key}}">
            {% if sous_group.titre != "Ajouter une parcelle" %}
                <h3 class="sous_group_titre">{{sous_group.titre}}</h3> {# On affiche le titre du sous groupe #}
            {% endif %}
            {% for input in sous_group.champs %} {# On parcours les champs du sous groupe #}
                <fieldset class="{% if input.required %}fieldset_required{% endif %} fieldset_{{input.type}} fieldset_{{input.name|trim}} fieldset_{{input.type}}">
                    <label for="{{input.name}}">{{input.label}}</label>
                    {% if input.option %}
                            {% if input.type == "select" %}
                                <select id="{{input.data_key|trim}}" name="{{input.name|trim}}" {% if input.required %} required {% endif %}>
                                    {% if input.options_value %}
                                        <option value="_">{{input.label}}</option>
                                        {% for k, option in input.options_value %}
                                            {% if k == input.default_value %}
                                                <option value="{{k}}" selected="selected">{{option}}</option>
                                            {% else %}
                                                <option value="{{k}}">{{option}}</option>
                                            {% endif %}
                                        {% endfor %}
                                    {% endif %}
                                </select>
                            {% elseif input.type == "radio" %}
                                <input type="hidden" name="flk_radio" value="{{input.name}}">
                                {% if input.options_value %}
                                    {% for j, radio in input.options_value %}
                                        <div class="radio_group radio_group_">
                                            {% if j == input.default_value %}
                                                <input type="radio" id="{{j|trim}}_cuvage" name="{{input.name|trim}}" value="{{j}}" checked>
                                            {% else %}
                                                <input type="radio" id="{{j|trim}}_cuvage" name="{{input.name|trim}}" value="{{j}}">
                                            {% endif %}
                                            <label for="{{j}}">{{radio}}</label>
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            {% elseif input.type == "checkbox" %}
                                <input type="hidden" name="flk_checkbox" value="{{input.name}}">
                                {% if input.options_value %}
                                    {% for j, radio in input.options_value %}
                                        <div class="checkbox_group checkbox_group_">
                                            {% if j == input.default_value %}
                                                <input type="checkbox" id="{{j|trim}}_cuvage" name="{{input.name|trim}}" value="{{j}}" checked>
                                            {% else %}
                                                <input type="checkbox" id="{{j|trim}}_cuvage" name="{{input.name|trim}}" value="{{j}}">
                                            {% endif %}
                                            <label for="{{j}}">{{radio}}</label>
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            {% endif %}
                        {% else %}
                            {% if input.type == "textarea" %}
                                <textarea rows="4" type="{{input.type}}" id="{{input.data_key|trim}}" name="{{input.name|trim}}" {% if input.required %} required {% endif %} placeholder="{{input.placeholder}}"  {% if input.name == "coordonees_gps" %} disabled {% endif %} {% if input.default_value != false %} value="{{input.default_value}}" {% endif %}></textarea>
                            {% else %}
                                <input type="{{input.type}}" id="{{input.data_key|trim}}" name="{{input.name|trim}}" {% if input.required %} required {% endif %} placeholder="{{input.placeholder}}"  {% if input.name == "coordonees_gps" %} disabled {% endif %} {% if input.default_value != false %} value="{{input.default_value}}" {% endif %}>
                            {% endif %}
                            {% if input.instructions|length > 0 %}
                                <span class="instructions" for="{{input.name}}"> {{input.instructions}} </span>			
                            {% endif %}
                        {% endif %}
                    {% if input.name == "numero_parcelle" %} 
                        <a class="recup_infos getGEOJSON" >  
                            <span class="loader_custom" style="display:none;">
                                <svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><style>.spinner_0XTQ{transform-origin:center;animation:spinner_y6GP .75s linear infinite}@keyframes spinner_y6GP{100%{transform:rotate(360deg)}}</style><path class="spinner_0XTQ" d="M12,23a9.63,9.63,0,0,1-8-9.5,9.51,9.51,0,0,1,6.79-9.1A1.66,1.66,0,0,0,12,2.81h0a1.67,1.67,0,0,0-1.94-1.64A11,11,0,0,0,12,23Z"/></svg>
                            </span>
                            <span class="recherche_label_jecherche">Vérifier le cadastre</span>    
                        </a>
                    {% endif %}
                </fieldset>
            {% endfor %}
        </div>
    {% endfor %}
    <div class="bouton-valid-delete">
        <a class="button_valider_shortcode button_valider_parcelle" data-shorcode="flk_parcelle" data-new="true" data-cuve="0"> <span class="valider">VALIDER LA PARCELLE</span> <span class="editer">MODIFIER LA PARCELLE</span> </a>
        <a class="supprimer parcelle" title="Supprimer la parcelle"> <span class="">SUPPRIMER LA PARCELLE</span></a>
    </div>
</div>

<a class="button_ajout_shortcode button_ajout_parcelle" data-shorcode="flk_parcelle" data-new="true" data-cuve="0"> <span class="ajouter">AJOUTER UNE NOUVELLE PARCELLE</span> </a>
